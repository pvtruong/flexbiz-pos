(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{1740:function(e,t,a){"use strict";a.r(t);var i=a(1),n=a.n(i),o=a(1703),l=a(480),r=a(1714),s=a(1715),p=a(437),c=a(55),d=a.n(c),u=a(374),h=a(564),g=a(520),m=a(1718),f=a(1719),b=a(1008);class v extends i.PureComponent{constructor(e){super(e),this.state={dataKeyX:null,dataKeyYs:[],data:null,typeChart:"line"},this.height=window.screen.height-120<400?window.screen.height-120:400}componentDidMount(){if(this.props.code){let e=localStorage.getItem(this.props.code);if(e)try{e=JSON.parse(e),this.setState(e)}catch(e){console.error(e.message)}}}open(e,t){this.setState({open:!0,data:e}),this.callback=t}close(){this.setState({open:!1})}render(){if(!this.state.open)return null;const{getLabel:e}=this.context.apis;let t=this.state.typeChart,a=this.state.dataKeyX,i=this.state.dataKeyYs,c=this.props.columns,d=this.state.data,u={typeChart:t,dataReport:d,columns:c,dataKeyX:a,dataKeyYs:i};return this.props.code&&localStorage.setItem(this.props.code,JSON.stringify({dataKeyX:a,dataKeyYs:i,typeChart:t})),n.a.createElement(r.a,{maxWidth:this.props.formSize||"lg",fullWidth:!0,open:this.state.open,onClose:()=>this.setState({open:!1})},n.a.createElement(p.a,{style:{backgroundColor:this.context.config.formHeaderColor,color:this.context.config.mainTextColor}},n.a.createElement(l.a,{container:!0,direction:"row",justify:"space-between"},n.a.createElement(l.a,{item:!0},e(this.props.title||"Đồ thị")),n.a.createElement(l.a,{item:!0,style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-end",paddingLeft:10}},n.a.createElement(o.a,{variant:"contained",style:{marginLeft:5},onClick:()=>this.setState({open:!1})},e("Tắt"))))),n.a.createElement(s.a,{style:{padding:10}},n.a.createElement(l.a,{container:!0},n.a.createElement(l.a,{item:!0,md:2,lg:2},n.a.createElement("div",{style:{marginTop:10}},n.a.createElement(m.a,{margin:"normal",fullWidth:!0,required:!0},n.a.createElement(f.a,{shrink:!0},e("Kiểu đồ thị")),n.a.createElement(g.a,{fullWidth:!0,value:t,valueField:"name",labelField:"header",items:b.b,onValueChanged:e=>{this.setState({typeChart:e})}}))),n.a.createElement("div",null,n.a.createElement(h.a,{fullWidth:!0,required:!0,multiple:!1,inputLabel:e("Cột toạ độ X"),value:a,valueField:"field",labelField:"header",items:this.props.columns,onValueChanged:e=>{this.setState({dataKeyX:e})}})),n.a.createElement("div",{style:{marginTop:10}},n.a.createElement(h.a,{fullWidth:!0,required:!0,multiple:!0,inputLabel:e("Cột toạ độ Y"),value:i,valueField:"field",labelField:"header",items:this.props.columns.filter(e=>"Number"===e.dataType||"Number"===e.datatype),onValueChanged:e=>{this.setState({dataKeyYs:e})}}))),n.a.createElement(l.a,{item:!0,md:10,lg:10},n.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:this.height,padding:10}},d&&a&&i&&i.length>0&&t&&n.a.createElement(b.a,u))))))}}v.contextType=u.a,v.propTypes={code:d.a.string,columns:d.a.array,title:d.a.string,formSize:d.a.oneOf(["sm","md","lg"])},t.default=v},520:function(e,t,a){"use strict";var i=a(1),n=a.n(i),o=a(55),l=a.n(o),r=a(391),s=a.n(r),p=a(1750),c=a(876),d=a(1755),u=a(1718),h=a(1719);class g extends i.PureComponent{constructor(e){super(e),this.state={value:this.props.value,items:[],load:1}}async componentDidMount(){this.fetchData()}async componentDidUpdate(e){let t=e.condition,a=this.props.condition;t&&t.then&&(t=await t),a&&a.then&&(a=await a),s()(a,t)||await this.fetchData(async()=>{this.state.value&&!await this.getItem(this.state.value)&&this.setState({value:null,load:this.state.load+1})}),s()(e.value,this.props.value)||this.setState({value:this.props.value})}async fetchData(e){let t;if("function"==typeof this.props.items)try{let e=this.props.condition;e&&e.then&&(e=await e),t=await this.props.items({...e,status:!0})}catch(e){return console.error(e.message)}else t=this.props.items;t.forEach?this.setState({items:t,load:this.state.load+1},e):(this.setState({items:[],load:this.state.load+1},e),console.error("Items must be an array or an async function which return an array"))}async getItem(e){if(!e&&0!=e)return;let t=this.state.items.find(t=>t[this.props.valueField]===e);if(!t&&"function"==typeof this.props.items)try{let a=this.props.condition;a&&a.then&&(a=await a);let i=await this.props.items({...a,[this.props.valueField]:e});i.length>0&&(t=i[0])}catch(e){console.error(e.message)}return t}handleValueChanged(e){const t="--"===e?void 0:e;this.setState({value:t},()=>{if(this.props.onValueChanged){let e=(this.state.items||[]).find(e=>e[this.props.valueField]==t),a=e&&this.props.labelField?e[this.props.labelField]:"--";this.props.onValueChanged(t,a,e)}})}render(){let{items:e,value:t}=this.state;0===e.length&&t&&(e=[{[this.props.valueField]:t}]);let a={[this.props.valueField]:"--"};if(this.props.labelField&&(a[this.props.labelField]="--"),e=[a].concat(e),this.props.disabled||this.props.readOnly){let a=e.find(e=>e[this.props.valueField]===t)||{};return n.a.createElement(d.a,{fullWidth:!0,value:a[this.props.labelField||this.props.valueField]||"--",readOnly:!0,InputLabelProps:{shrink:!0},label:this.props.inputLabel})}return this.props.inputLabel?n.a.createElement(u.a,{margin:"normal",fullWidth:!0,required:this.props.required},n.a.createElement(h.a,{shrink:!0},this.props.inputLabel),n.a.createElement(p.a,{id:this.props.id,fullWidth:this.props.fullWidth,required:this.props.required,value:t,disabled:this.props.disabled,InputProps:this.props.InputProps,readOnly:this.props.readOnly,onChange:e=>this.handleValueChanged(e.target.value)},e.map((e,t)=>{let a=e[this.props.valueField];return a||0==a||(a="--"),n.a.createElement(c.a,{key:t.toString(),value:a},e[this.props.labelField||this.props.valueField]||"--")}))):n.a.createElement(p.a,{id:this.props.id,fullWidth:this.props.fullWidth,required:this.props.required,value:t,disabled:this.props.disabled,InputProps:this.props.InputProps,readOnly:this.props.readOnly,onChange:e=>this.handleValueChanged(e.target.value)},e.map((e,t)=>{let a=e[this.props.valueField];return a||0==a||(a="--"),n.a.createElement(c.a,{key:t.toString(),value:a},e[this.props.labelField||this.props.valueField]||"--")}))}}g.propTypes={label:l.a.string,onValueChanged:l.a.func,value:l.a.any,required:l.a.bool,disabled:l.a.bool,readOnly:l.a.bool,fullWidth:l.a.bool,valueField:l.a.string.isRequired,labelField:l.a.string,inputLabel:l.a.string,id:l.a.string,condition:l.a.any,InputProps:l.a.object,items:l.a.any.isRequired},t.a=g},564:function(e,t,a){"use strict";var i=a(1),n=a.n(i),o=a(1755),l=a(1703),r=a(1707),s=a(12),p=a(400),c=(a(516),a(389)),d=a(405),u=a(406),h=a(402);function g(e){return void 0!==e.normalize?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ignoreAccents,a=void 0===t||t,i=e.ignoreCase,n=void 0===i||i,o=e.limit,l=e.matchFrom,r=void 0===l?"any":l,s=e.stringify,p=e.trim,c=void 0!==p&&p;return function(e,t){var i=t.inputValue,l=t.getOptionLabel,p=c?i.trim():i;n&&(p=p.toLowerCase()),a&&(p=g(p));var d=e.filter((function(e){var t=(s||l)(e);return n&&(t=t.toLowerCase()),a&&(t=g(t)),"start"===r?0===t.indexOf(p):t.indexOf(p)>-1}));return"number"==typeof o?d.slice(0,o):d}}function f(e,t){for(var a=0;a<e.length;a+=1)if(t(e[a]))return a;return-1}var b=m();function v(e){var t=e.autoComplete,a=void 0!==t&&t,n=e.autoHighlight,o=void 0!==n&&n,l=e.autoSelect,r=void 0!==l&&l,g=e.blurOnSelect,m=void 0!==g&&g,v=e.clearOnBlur,y=void 0===v?!e.freeSolo:v,O=e.clearOnEscape,C=void 0!==O&&O,x=e.componentName,S=void 0===x?"useAutocomplete":x,I=e.debug,w=void 0!==I&&I,k=e.defaultValue,E=void 0===k?e.multiple?[]:null:k,F=e.disableClearable,j=void 0!==F&&F,L=e.disableCloseOnSelect,P=void 0!==L&&L,$=e.disabledItemsFocusable,T=void 0!==$&&$,D=e.disableListWrap,V=void 0!==D&&D,R=e.filterOptions,A=void 0===R?b:R,N=e.filterSelectedOptions,M=void 0!==N&&N,_=e.freeSolo,W=void 0!==_&&_,q=e.getOptionDisabled,z=e.getOptionLabel,H=void 0===z?function(e){return e}:z,K=e.getOptionSelected,B=void 0===K?function(e,t){return e===t}:K,U=e.groupBy,X=e.handleHomeEndKeys,Y=void 0===X?!e.freeSolo:X,J=e.id,G=e.includeInputInList,Q=void 0!==G&&G,Z=e.inputValue,ee=e.multiple,te=void 0!==ee&&ee,ae=e.onChange,ie=e.onClose,ne=e.onHighlightChange,oe=e.onInputChange,le=e.onOpen,re=e.open,se=e.openOnFocus,pe=void 0!==se&&se,ce=e.options,de=e.selectOnFocus,ue=void 0===de?!e.freeSolo:de,he=e.value,ge=Object(c.a)(J),me=H;var fe=i.useRef(!1),be=i.useRef(!0),ve=i.useRef(null),ye=i.useRef(null),Oe=i.useState(null),Ce=Oe[0],xe=Oe[1],Se=i.useState(-1),Ie=Se[0],we=Se[1],ke=o?0:-1,Ee=i.useRef(ke),Fe=Object(d.a)({controlled:he,default:E,name:S}),je=Object(p.a)(Fe,2),Le=je[0],Pe=je[1],$e=Object(d.a)({controlled:Z,default:"",name:S,state:"inputValue"}),Te=Object(p.a)($e,2),De=Te[0],Ve=Te[1],Re=i.useState(!1),Ae=Re[0],Ne=Re[1],Me=Object(u.a)((function(e,t){var a;if(te)a="";else if(null==t)a="";else{var i=me(t);a="string"==typeof i?i:""}De!==a&&(Ve(a),oe&&oe(e,a,"reset"))}));i.useEffect((function(){Me(null,Le)}),[Le,Me]);var _e=Object(d.a)({controlled:re,default:!1,name:S,state:"open"}),We=Object(p.a)(_e,2),qe=We[0],ze=We[1],He=!te&&null!=Le&&De===me(Le),Ke=qe,Be=Ke?A(ce.filter((function(e){return!M||!(te?Le:[Le]).some((function(t){return null!==t&&B(e,t)}))})),{inputValue:He?"":De,getOptionLabel:me}):[],Ue=Object(u.a)((function(e){-1===e?ve.current.focus():Ce.querySelector('[data-tag-index="'.concat(e,'"]')).focus()}));i.useEffect((function(){te&&Ie>Le.length-1&&(we(-1),Ue(-1))}),[Le,te,Ie,Ue]);var Xe=Object(u.a)((function(e){var t=e.event,a=e.index,i=e.reason,n=void 0===i?"auto":i;if(Ee.current=a,-1===a?ve.current.removeAttribute("aria-activedescendant"):ve.current.setAttribute("aria-activedescendant","".concat(ge,"-option-").concat(a)),ne&&ne(t,-1===a?null:Be[a],n),ye.current){var o=ye.current.querySelector("[data-focus]");o&&o.removeAttribute("data-focus");var l=ye.current.parentElement.querySelector('[role="listbox"]');if(l)if(-1!==a){var r=ye.current.querySelector('[data-option-index="'.concat(a,'"]'));if(r&&(r.setAttribute("data-focus","true"),l.scrollHeight>l.clientHeight&&"mouse"!==n)){var s=r,p=l.clientHeight+l.scrollTop,c=s.offsetTop+s.offsetHeight;c>p?l.scrollTop=c-l.clientHeight:s.offsetTop-s.offsetHeight*(U?1.3:0)<l.scrollTop&&(l.scrollTop=s.offsetTop-s.offsetHeight*(U?1.3:0))}}else l.scrollTop=0}})),Ye=Object(u.a)((function(e){var t=e.event,i=e.diff,n=e.direction,o=void 0===n?"next":n,l=e.reason,r=void 0===l?"auto":l;if(Ke){var s=function(e,t){if(!ye.current||-1===e)return-1;for(var a=e;;){if("next"===t&&a===Be.length||"previous"===t&&-1===a)return-1;var i=ye.current.querySelector('[data-option-index="'.concat(a,'"]')),n=!T&&(i&&(i.disabled||"true"===i.getAttribute("aria-disabled")));if(!(i&&!i.hasAttribute("tabindex")||n))return a;a+="next"===t?1:-1}}(function(){var e=Be.length-1;if("reset"===i)return ke;if("start"===i)return 0;if("end"===i)return e;var t=Ee.current+i;return t<0?-1===t&&Q?-1:V&&-1!==Ee.current||Math.abs(i)>1?0:e:t>e?t===e+1&&Q?-1:V||Math.abs(i)>1?e:0:t}(),o);if(Xe({index:s,reason:r,event:t}),a&&"reset"!==i)if(-1===s)ve.current.value=De;else{var p=me(Be[s]);ve.current.value=p,0===p.toLowerCase().indexOf(De.toLowerCase())&&De.length>0&&ve.current.setSelectionRange(De.length,p.length)}}})),Je=i.useCallback((function(){if(Ke){var e=te?Le[0]:Le;if(0!==Be.length&&null!=e){if(ye.current)if(M||null==e)Ee.current>=Be.length-1?Xe({index:Be.length-1}):Xe({index:Ee.current});else{var t=Be[Ee.current];if(te&&t&&-1!==f(Le,(function(e){return B(t,e)})))return;var a=f(Be,(function(t){return B(t,e)}));-1===a?Ye({diff:"reset"}):Xe({index:a})}}else Ye({diff:"reset"})}}),[0===Be.length,!te&&Le,M,Ye,Xe,Ke,De,te]),Ge=Object(u.a)((function(e){Object(h.a)(ye,e),e&&Je()}));i.useEffect((function(){Je()}),[Je]);var Qe=function(e){qe||(ze(!0),le&&le(e))},Ze=function(e,t){qe&&(ze(!1),ie&&ie(e,t))},et=function(e,t,a,i){Le!==t&&(ae&&ae(e,t,a,i),Pe(t))},tt=i.useRef(!1),at=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"select-option",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"options",n=a,o=t;if(te){var l=f(o=Array.isArray(Le)?Le.slice():[],(function(e){return B(t,e)}));-1===l?o.push(t):"freeSolo"!==i&&(o.splice(l,1),n="remove-option")}Me(e,o),et(e,o,n,{option:t}),P||Ze(e,n),(!0===m||"touch"===m&&tt.current||"mouse"===m&&!tt.current)&&ve.current.blur()};var it=function(e,t){if(te){Ze(e,"toggleInput");var a=Ie;-1===Ie?""===De&&"previous"===t&&(a=Le.length-1):((a+="next"===t?1:-1)<0&&(a=0),a===Le.length&&(a=-1)),a=function(e,t){if(-1===e)return-1;for(var a=e;;){if("next"===t&&a===Le.length||"previous"===t&&-1===a)return-1;var i=Ce.querySelector('[data-tag-index="'.concat(a,'"]'));if(!i||i.hasAttribute("tabindex")&&!i.disabled&&"true"!==i.getAttribute("aria-disabled"))return a;a+="next"===t?1:-1}}(a,t),we(a),Ue(a)}},nt=function(e){fe.current=!0,Ve(""),oe&&oe(e,"","clear"),et(e,te?[]:null,"clear")},ot=function(e){return function(t){switch(-1!==Ie&&-1===["ArrowLeft","ArrowRight"].indexOf(t.key)&&(we(-1),Ue(-1)),t.key){case"Home":Ke&&Y&&(t.preventDefault(),Ye({diff:"start",direction:"next",reason:"keyboard",event:t}));break;case"End":Ke&&Y&&(t.preventDefault(),Ye({diff:"end",direction:"previous",reason:"keyboard",event:t}));break;case"PageUp":t.preventDefault(),Ye({diff:-5,direction:"previous",reason:"keyboard",event:t}),Qe(t);break;case"PageDown":t.preventDefault(),Ye({diff:5,direction:"next",reason:"keyboard",event:t}),Qe(t);break;case"ArrowDown":t.preventDefault(),Ye({diff:1,direction:"next",reason:"keyboard",event:t}),Qe(t);break;case"ArrowUp":t.preventDefault(),Ye({diff:-1,direction:"previous",reason:"keyboard",event:t}),Qe(t);break;case"ArrowLeft":it(t,"previous");break;case"ArrowRight":it(t,"next");break;case"Enter":if(229===t.which)break;if(-1!==Ee.current&&Ke){var i=Be[Ee.current],n=!!q&&q(i);if(t.preventDefault(),n)return;at(t,i,"select-option"),a&&ve.current.setSelectionRange(ve.current.value.length,ve.current.value.length)}else W&&""!==De&&!1===He&&(te&&t.preventDefault(),at(t,De,"create-option","freeSolo"));break;case"Escape":Ke?(t.preventDefault(),t.stopPropagation(),Ze(t,"escape")):C&&(""!==De||te&&Le.length>0)&&(t.preventDefault(),t.stopPropagation(),nt(t));break;case"Backspace":if(te&&""===De&&Le.length>0){var o=-1===Ie?Le.length-1:Ie,l=Le.slice();l.splice(o,1),et(t,l,"remove-option",{option:Le[o]})}}e.onKeyDown&&e.onKeyDown(t)}},lt=function(e){Ne(!0),pe&&!fe.current&&Qe(e)},rt=function(e){null===ye.current||document.activeElement!==ye.current.parentElement?(Ne(!1),be.current=!0,fe.current=!1,w&&""!==De||(r&&-1!==Ee.current&&Ke?at(e,Be[Ee.current],"blur"):r&&W&&""!==De?at(e,De,"blur","freeSolo"):y&&Me(e,Le),Ze(e,"blur"))):ve.current.focus()},st=function(e){var t=e.target.value;De!==t&&(Ve(t),oe&&oe(e,t,"input")),""===t?j||te||et(e,null,"clear"):Qe(e)},pt=function(e){Xe({event:e,index:Number(e.currentTarget.getAttribute("data-option-index")),reason:"mouse"})},ct=function(){tt.current=!0},dt=function(e){var t=Number(e.currentTarget.getAttribute("data-option-index"));at(e,Be[t],"select-option"),tt.current=!1},ut=function(e){return function(t){var a=Le.slice();a.splice(e,1),et(t,a,"remove-option",{option:Le[e]})}},ht=function(e){qe?Ze(e,"toggleInput"):Qe(e)},gt=function(e){e.target.getAttribute("id")!==ge&&e.preventDefault()},mt=function(){ve.current.focus(),ue&&be.current&&ve.current.selectionEnd-ve.current.selectionStart==0&&ve.current.select(),be.current=!1},ft=function(e){""!==De&&qe||ht(e)},bt=W&&De.length>0;bt=bt||(te?Le.length>0:null!==Le);var vt=Be;if(U){new Map;vt=Be.reduce((function(e,t,a){var i=U(t);return e.length>0&&e[e.length-1].group===i?e[e.length-1].options.push(t):e.push({key:a,index:a,group:i,options:[t]}),e}),[])}return{getRootProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(s.a)({"aria-owns":Ke?"".concat(ge,"-popup"):null,role:"combobox","aria-expanded":Ke},e,{onKeyDown:ot(e),onMouseDown:gt,onClick:mt})},getInputLabelProps:function(){return{id:"".concat(ge,"-label"),htmlFor:ge}},getInputProps:function(){return{id:ge,value:De,onBlur:rt,onFocus:lt,onChange:st,onMouseDown:ft,"aria-activedescendant":Ke?"":null,"aria-autocomplete":a?"both":"list","aria-controls":Ke?"".concat(ge,"-popup"):null,autoComplete:"off",ref:ve,autoCapitalize:"none",spellCheck:"false"}},getClearProps:function(){return{tabIndex:-1,onClick:nt}},getPopupIndicatorProps:function(){return{tabIndex:-1,onClick:ht}},getTagProps:function(e){var t=e.index;return{key:t,"data-tag-index":t,tabIndex:-1,onDelete:ut(t)}},getListboxProps:function(){return{role:"listbox",id:"".concat(ge,"-popup"),"aria-labelledby":"".concat(ge,"-label"),ref:Ge,onMouseDown:function(e){e.preventDefault()}}},getOptionProps:function(e){var t=e.index,a=e.option,i=(te?Le:[Le]).some((function(e){return null!=e&&B(a,e)})),n=!!q&&q(a);return{key:t,tabIndex:-1,role:"option",id:"".concat(ge,"-option-").concat(t),onMouseOver:pt,onClick:dt,onTouchStart:ct,"data-option-index":t,"aria-disabled":n,"aria-selected":i}},id:ge,inputValue:De,value:Le,dirty:bt,popupOpen:Ke,focused:Ae||-1!==Ie,anchorEl:Ce,setAnchorEl:xe,focusedTag:Ie,groupedOptions:vt}}var y=a(368),O=a(388),C=a(55),x=a.n(C),S=a(369),I=a(370),w=a(736),k=a(1154),E=a(669),F=a(383),j=Object(F.a)(i.createElement("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel"),L=a(395),P=a(382),$=a(378),T=a(1752);function D(e){return"Backspace"===e.key||"Delete"===e.key}var V=i.forwardRef((function(e,t){var a=e.avatar,n=e.classes,o=e.className,l=e.clickable,r=e.color,p=void 0===r?"default":r,c=e.component,d=e.deleteIcon,u=e.disabled,h=void 0!==u&&u,g=e.icon,m=e.label,f=e.onClick,b=e.onDelete,v=e.onKeyDown,O=e.onKeyUp,C=e.size,x=void 0===C?"medium":C,I=e.variant,w=void 0===I?"default":I,k=Object(y.a)(e,["avatar","classes","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant"]),E=i.useRef(null),F=Object(P.a)(E,t),L=function(e){e.stopPropagation(),b&&b(e)},V=!(!1===l||!f)||l,R="small"===x,A=c||(V?T.a:"div"),N=A===T.a?{component:"div"}:{},M=null;if(b){var _=Object(S.a)("default"!==p&&("default"===w?n["deleteIconColor".concat(Object($.a)(p))]:n["deleteIconOutlinedColor".concat(Object($.a)(p))]),R&&n.deleteIconSmall);M=d&&i.isValidElement(d)?i.cloneElement(d,{className:Object(S.a)(d.props.className,n.deleteIcon,_),onClick:L}):i.createElement(j,{className:Object(S.a)(n.deleteIcon,_),onClick:L})}var W=null;a&&i.isValidElement(a)&&(W=i.cloneElement(a,{className:Object(S.a)(n.avatar,a.props.className,R&&n.avatarSmall,"default"!==p&&n["avatarColor".concat(Object($.a)(p))])}));var q=null;return g&&i.isValidElement(g)&&(q=i.cloneElement(g,{className:Object(S.a)(n.icon,g.props.className,R&&n.iconSmall,"default"!==p&&n["iconColor".concat(Object($.a)(p))])})),i.createElement(A,Object(s.a)({role:V||b?"button":void 0,className:Object(S.a)(n.root,o,"default"!==p&&[n["color".concat(Object($.a)(p))],V&&n["clickableColor".concat(Object($.a)(p))],b&&n["deletableColor".concat(Object($.a)(p))]],"default"!==w&&[n.outlined,{primary:n.outlinedPrimary,secondary:n.outlinedSecondary}[p]],h&&n.disabled,R&&n.sizeSmall,V&&n.clickable,b&&n.deletable),"aria-disabled":!!h||void 0,tabIndex:V||b?0:void 0,onClick:f,onKeyDown:function(e){e.currentTarget===e.target&&D(e)&&e.preventDefault(),v&&v(e)},onKeyUp:function(e){e.currentTarget===e.target&&(b&&D(e)?b(e):"Escape"===e.key&&E.current&&E.current.blur()),O&&O(e)},ref:F},N,k),W||q,i.createElement("span",{className:Object(S.a)(n.label,R&&n.labelSmall)},m),M)})),R=Object(I.a)((function(e){var t="light"===e.palette.type?e.palette.grey[300]:e.palette.grey[700],a=Object(L.a)(e.palette.text.primary,.26);return{root:{fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:e.palette.getContrastText(t),backgroundColor:t,borderRadius:16,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"default",outline:0,textDecoration:"none",border:"none",padding:0,verticalAlign:"middle",boxSizing:"border-box","&$disabled":{opacity:.5,pointerEvents:"none"},"& $avatar":{marginLeft:5,marginRight:-6,width:24,height:24,color:"light"===e.palette.type?e.palette.grey[700]:e.palette.grey[300],fontSize:e.typography.pxToRem(12)},"& $avatarColorPrimary":{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.dark},"& $avatarColorSecondary":{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.dark},"& $avatarSmall":{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)}},sizeSmall:{height:24},colorPrimary:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText},colorSecondary:{backgroundColor:e.palette.secondary.main,color:e.palette.secondary.contrastText},disabled:{},clickable:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover, &:focus":{backgroundColor:Object(L.c)(t,.08)},"&:active":{boxShadow:e.shadows[1]}},clickableColorPrimary:{"&:hover, &:focus":{backgroundColor:Object(L.c)(e.palette.primary.main,.08)}},clickableColorSecondary:{"&:hover, &:focus":{backgroundColor:Object(L.c)(e.palette.secondary.main,.08)}},deletable:{"&:focus":{backgroundColor:Object(L.c)(t,.08)}},deletableColorPrimary:{"&:focus":{backgroundColor:Object(L.c)(e.palette.primary.main,.2)}},deletableColorSecondary:{"&:focus":{backgroundColor:Object(L.c)(e.palette.secondary.main,.2)}},outlined:{backgroundColor:"transparent",border:"1px solid ".concat("light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),"$clickable&:hover, $clickable&:focus, $deletable&:focus":{backgroundColor:Object(L.a)(e.palette.text.primary,e.palette.action.hoverOpacity)},"& $avatar":{marginLeft:4},"& $avatarSmall":{marginLeft:2},"& $icon":{marginLeft:4},"& $iconSmall":{marginLeft:2},"& $deleteIcon":{marginRight:5},"& $deleteIconSmall":{marginRight:3}},outlinedPrimary:{color:e.palette.primary.main,border:"1px solid ".concat(e.palette.primary.main),"$clickable&:hover, $clickable&:focus, $deletable&:focus":{backgroundColor:Object(L.a)(e.palette.primary.main,e.palette.action.hoverOpacity)}},outlinedSecondary:{color:e.palette.secondary.main,border:"1px solid ".concat(e.palette.secondary.main),"$clickable&:hover, $clickable&:focus, $deletable&:focus":{backgroundColor:Object(L.a)(e.palette.secondary.main,e.palette.action.hoverOpacity)}},avatar:{},avatarSmall:{},avatarColorPrimary:{},avatarColorSecondary:{},icon:{color:"light"===e.palette.type?e.palette.grey[700]:e.palette.grey[300],marginLeft:5,marginRight:-6},iconSmall:{width:18,height:18,marginLeft:4,marginRight:-4},iconColorPrimary:{color:"inherit"},iconColorSecondary:{color:"inherit"},label:{overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},labelSmall:{paddingLeft:8,paddingRight:8},deleteIcon:{WebkitTapHighlightColor:"transparent",color:a,height:22,width:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:Object(L.a)(a,.4)}},deleteIconSmall:{height:16,width:16,marginRight:4,marginLeft:-4},deleteIconColorPrimary:{color:Object(L.a)(e.palette.primary.contrastText,.7),"&:hover, &:active":{color:e.palette.primary.contrastText}},deleteIconColorSecondary:{color:Object(L.a)(e.palette.secondary.contrastText,.7),"&:hover, &:active":{color:e.palette.secondary.contrastText}},deleteIconOutlinedColorPrimary:{color:Object(L.a)(e.palette.primary.main,.7),"&:hover, &:active":{color:e.palette.primary.main}},deleteIconOutlinedColorSecondary:{color:Object(L.a)(e.palette.secondary.main,.7),"&:hover, &:active":{color:e.palette.secondary.main}}}}),{name:"MuiChip"})(V),A=Object(F.a)(i.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),N=Object(F.a)(i.createElement("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown");function M(e){e.anchorEl,e.open;var t=Object(y.a)(e,["anchorEl","open"]);return i.createElement("div",t)}var _=i.createElement(A,{fontSize:"small"}),W=i.createElement(N,null),q=i.forwardRef((function(e,t){e.autoComplete,e.autoHighlight,e.autoSelect,e.blurOnSelect;var a,n=e.ChipProps,o=e.classes,l=e.className,p=e.clearOnBlur,c=(void 0===p&&e.freeSolo,e.clearOnEscape,e.clearText),d=void 0===c?"Clear":c,u=e.closeIcon,h=void 0===u?_:u,g=e.closeText,m=void 0===g?"Close":g,f=(e.debug,e.defaultValue),b=(void 0===f&&e.multiple,e.disableClearable),O=void 0!==b&&b,C=(e.disableCloseOnSelect,e.disabled),x=void 0!==C&&C,I=(e.disabledItemsFocusable,e.disableListWrap,e.disablePortal),F=void 0!==I&&I,j=(e.filterOptions,e.filterSelectedOptions,e.forcePopupIcon),L=void 0===j?"auto":j,P=e.freeSolo,$=void 0!==P&&P,T=e.fullWidth,D=void 0!==T&&T,V=e.getLimitTagsText,A=void 0===V?function(e){return"+".concat(e)}:V,N=(e.getOptionDisabled,e.getOptionLabel),q=void 0===N?function(e){return e}:N,z=(e.getOptionSelected,e.groupBy),H=e.handleHomeEndKeys,K=(void 0===H&&e.freeSolo,e.id,e.includeInputInList,e.inputValue,e.limitTags),B=void 0===K?-1:K,U=e.ListboxComponent,X=void 0===U?"ul":U,Y=e.ListboxProps,J=e.loading,G=void 0!==J&&J,Q=e.loadingText,Z=void 0===Q?"Loading…":Q,ee=e.multiple,te=void 0!==ee&&ee,ae=e.noOptionsText,ie=void 0===ae?"No options":ae,ne=(e.onChange,e.onClose,e.onHighlightChange,e.onInputChange,e.onOpen,e.open,e.openOnFocus,e.openText),oe=void 0===ne?"Open":ne,le=(e.options,e.PaperComponent),re=void 0===le?r.a:le,se=e.PopperComponent,pe=void 0===se?w.a:se,ce=e.popupIcon,de=void 0===ce?W:ce,ue=e.renderGroup,he=e.renderInput,ge=e.renderOption,me=e.renderTags,fe=e.selectOnFocus,be=(void 0===fe&&e.freeSolo,e.size),ve=void 0===be?"medium":be,ye=(e.value,Object(y.a)(e,["autoComplete","autoHighlight","autoSelect","blurOnSelect","ChipProps","classes","className","clearOnBlur","clearOnEscape","clearText","closeIcon","closeText","debug","defaultValue","disableClearable","disableCloseOnSelect","disabled","disabledItemsFocusable","disableListWrap","disablePortal","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","fullWidth","getLimitTagsText","getOptionDisabled","getOptionLabel","getOptionSelected","groupBy","handleHomeEndKeys","id","includeInputInList","inputValue","limitTags","ListboxComponent","ListboxProps","loading","loadingText","multiple","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","PaperComponent","PopperComponent","popupIcon","renderGroup","renderInput","renderOption","renderTags","selectOnFocus","size","value"])),Oe=F?M:pe,Ce=v(Object(s.a)({},e,{componentName:"Autocomplete"})),xe=Ce.getRootProps,Se=Ce.getInputProps,Ie=Ce.getInputLabelProps,we=Ce.getPopupIndicatorProps,ke=Ce.getClearProps,Ee=Ce.getTagProps,Fe=Ce.getListboxProps,je=Ce.getOptionProps,Le=Ce.value,Pe=Ce.dirty,$e=Ce.id,Te=Ce.popupOpen,De=Ce.focused,Ve=Ce.focusedTag,Re=Ce.anchorEl,Ae=Ce.setAnchorEl,Ne=Ce.inputValue,Me=Ce.groupedOptions;if(te&&Le.length>0){var _e=function(e){return Object(s.a)({className:Object(S.a)(o.tag,"small"===ve&&o.tagSizeSmall),disabled:x},Ee(e))};a=me?me(Le,_e):Le.map((function(e,t){return i.createElement(R,Object(s.a)({label:q(e),size:ve},_e({index:t}),n))}))}if(B>-1&&Array.isArray(a)){var We=a.length-B;!De&&We>0&&(a=a.splice(0,B)).push(i.createElement("span",{className:o.tag,key:a.length},A(We)))}var qe=ue||function(e){return i.createElement("li",{key:e.key},i.createElement(k.a,{className:o.groupLabel,component:"div"},e.group),i.createElement("ul",{className:o.groupUl},e.children))},ze=ge||q,He=function(e,t){var a=je({option:e,index:t});return i.createElement("li",Object(s.a)({},a,{className:o.option}),ze(e,{selected:a["aria-selected"],inputValue:Ne}))},Ke=!O&&!x,Be=(!$||!0===L)&&!1!==L;return i.createElement(i.Fragment,null,i.createElement("div",Object(s.a)({ref:t,className:Object(S.a)(o.root,l,De&&o.focused,D&&o.fullWidth,Ke&&o.hasClearIcon,Be&&o.hasPopupIcon)},xe(ye)),he({id:$e,disabled:x,fullWidth:!0,size:"small"===ve?"small":void 0,InputLabelProps:Ie(),InputProps:{ref:Ae,className:o.inputRoot,startAdornment:a,endAdornment:i.createElement("div",{className:o.endAdornment},Ke?i.createElement(E.a,Object(s.a)({},ke(),{"aria-label":d,title:d,className:Object(S.a)(o.clearIndicator,Pe&&o.clearIndicatorDirty)}),h):null,Be?i.createElement(E.a,Object(s.a)({},we(),{disabled:x,"aria-label":Te?m:oe,title:Te?m:oe,className:Object(S.a)(o.popupIndicator,Te&&o.popupIndicatorOpen)}),de):null)},inputProps:Object(s.a)({className:Object(S.a)(o.input,-1===Ve&&o.inputFocused),disabled:x},Se())})),Te&&Re?i.createElement(Oe,{className:Object(S.a)(o.popper,F&&o.popperDisablePortal),style:{width:Re?Re.clientWidth:null},role:"presentation",anchorEl:Re,open:!0},i.createElement(re,{className:o.paper},G&&0===Me.length?i.createElement("div",{className:o.loading},Z):null,0!==Me.length||$||G?null:i.createElement("div",{className:o.noOptions},ie),Me.length>0?i.createElement(X,Object(s.a)({className:o.listbox},Fe(),Y),Me.map((function(e,t){return z?qe({key:e.key,group:e.group,children:e.options.map((function(t,a){return He(t,e.index+a)}))}):He(e,t)}))):null)):null)})),z=Object(I.a)((function(e){var t;return{root:{"&$focused $clearIndicatorDirty":{visibility:"visible"},"@media (pointer: fine)":{"&:hover $clearIndicatorDirty":{visibility:"visible"}}},fullWidth:{width:"100%"},focused:{},tag:{margin:3,maxWidth:"calc(100% - 6px)"},tagSizeSmall:{margin:2,maxWidth:"calc(100% - 4px)"},hasPopupIcon:{},hasClearIcon:{},inputRoot:{flexWrap:"wrap","$hasPopupIcon &, $hasClearIcon &":{paddingRight:30},"$hasPopupIcon$hasClearIcon &":{paddingRight:56},"& $input":{width:0,minWidth:30},'&[class*="MuiInput-root"]':{paddingBottom:1,"& $input":{padding:4},"& $input:first-child":{padding:"6px 0"}},'&[class*="MuiInput-root"][class*="MuiInput-marginDense"]':{"& $input":{padding:"4px 4px 5px"},"& $input:first-child":{padding:"3px 0 6px"}},'&[class*="MuiOutlinedInput-root"]':{padding:9,"$hasPopupIcon &, $hasClearIcon &":{paddingRight:39},"$hasPopupIcon$hasClearIcon &":{paddingRight:65},"& $input":{padding:"9.5px 4px"},"& $input:first-child":{paddingLeft:6},"& $endAdornment":{right:9}},'&[class*="MuiOutlinedInput-root"][class*="MuiOutlinedInput-marginDense"]':{padding:6,"& $input":{padding:"4.5px 4px"}},'&[class*="MuiFilledInput-root"]':{paddingTop:19,paddingLeft:8,"$hasPopupIcon &, $hasClearIcon &":{paddingRight:39},"$hasPopupIcon$hasClearIcon &":{paddingRight:65},"& $input":{padding:"9px 4px"},"& $endAdornment":{right:9}},'&[class*="MuiFilledInput-root"][class*="MuiFilledInput-marginDense"]':{paddingBottom:1,"& $input":{padding:"4.5px 4px"}}},input:{flexGrow:1,textOverflow:"ellipsis",opacity:0},inputFocused:{opacity:1},endAdornment:{position:"absolute",right:0,top:"calc(50% - 14px)"},clearIndicator:{marginRight:-2,padding:4,visibility:"hidden"},clearIndicatorDirty:{},popupIndicator:{padding:2,marginRight:-2},popupIndicatorOpen:{transform:"rotate(180deg)"},popper:{zIndex:e.zIndex.modal},popperDisablePortal:{position:"absolute"},paper:Object(s.a)({},e.typography.body1,{overflow:"hidden",margin:"4px 0"}),listbox:{listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto"},loading:{color:e.palette.text.secondary,padding:"14px 16px"},noOptions:{color:e.palette.text.secondary,padding:"14px 16px"},option:(t={minHeight:48,display:"flex",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16},Object(O.a)(t,e.breakpoints.up("sm"),{minHeight:"auto"}),Object(O.a)(t,'&[aria-selected="true"]',{backgroundColor:e.palette.action.selected}),Object(O.a)(t,'&[data-focus="true"]',{backgroundColor:e.palette.action.hover}),Object(O.a)(t,"&:active",{backgroundColor:e.palette.action.selected}),Object(O.a)(t,'&[aria-disabled="true"]',{opacity:e.palette.action.disabledOpacity,pointerEvents:"none"}),t),groupLabel:{backgroundColor:e.palette.background.paper,top:-8},groupUl:{padding:0,"& $option":{paddingLeft:24}}}}),{name:"MuiAutocomplete"})(q),H=a(391),K=a.n(H);function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}var U=e=>{class t extends n.a.Component{constructor(e){super(e),this.state={load:0}}componentDidMount(){}async shouldComponentUpdate(e,t){if(t.load!==this.state.load)return!0;if(e.model!=this.props.model)return console.log("Model changed, rerender withList",e.model),this.listModel=null,!0;if(e.valueField!=this.props.valueField)return console.log("value field changed, rerender withList",e.model),!0;if(!K()(e.value,this.props.value))return console.log("value changed, rerender withList",e.model),!0;let a=this.props.condition,i=e.condition;return a&&a.then&&(a=await a),i&&i.then&&(i=await i),!K()(a,i)&&(console.log("condition changed, rerender withList",e.model,"old",this.props.condition,"new",e.condition),!0)}async getListModel(){let e=this.props.model;return e?(await new Promise(t=>{(async()=>{if(this.listModel)t();else{const{default:i}=await Promise.all([a.e(0),a.e(4),a.e(1),a.e(2),a.e(18)]).then(a.bind(null,488));this.setState({InputBase:n.a.createElement(i,{ref:e=>this.listModel=e,noRender:!0,code:e}),load:this.state.load+1},()=>{t()})}})()}),this.listModel):null}render(){const{forwardedRef:t,...a}=this.props;return n.a.createElement(n.a.Fragment,null,n.a.createElement(e,B({getListModel:this.getListModel.bind(this),ref:t},a)),this.state.InputBase)}}return t.propTypes={model:x.a.string,valueField:x.a.string,value:x.a.any,condition:x.a.any,forwardedRef:x.a.any},t},X=a(374);function Y(){return(Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}class J extends i.Component{constructor(e){super(e),this.state={value:this.props.value,itemSelected:this.props.multiple?[]:null,items:[],loading:!1},this.filter=m({matchFrom:(this.props.model,"any"),stringify:e=>{let t="";if(this.props.field4Search)this.props.field4Search.split(",").forEach(a=>{t=`${t}${e[a]||""}`});else{let a=e[this.props.labelField]||"",i=e[this.props.valueField]||"";t=`${i}${a}`}return t}}),this._all_=null}async componentDidMount(){this.fetchData(null,async()=>{if(this.state.value){let e=await this.getSelectedItem(this.state.value);this.setState({itemSelected:e})}},{online:!1})}async componentDidUpdate(e){let t=e.condition,a=this.props.condition;if(t&&t.then&&(t=await t),a&&a.then&&(a=await a),K()(a,t)||(this._all_=null,this.setState({items:[],itemSelected:null,inputValue:"",value:null})),!K()(this.props.value,e.value)){let e=this.props.value,t=await this.getSelectedItem(e);t&&0!==t.length||(e=null),this.setState({itemSelected:t,value:e})}}async getCondition(){let e;if(this.props.condition)if(this.props.condition&&this.props.condition.then)e=await this.props.condition;else if("object"==typeof this.props.condition)e=this.props.condition;else try{e=JSON.parse(this.props.condition)}catch(e){console.error(e.message,this.props.condition)}return e}async getItem(e){if(!e&&0!=e)return;let t;if(e===this.props.value&&(!this.props.labelField||this.props.label))return t={[this.props.valueField]:e},this.props.labelField&&(t[this.props.labelField]=this.props.label),t;if(t=this.state.items.find(t=>t[this.props.valueField]===e),!t&&"function"==typeof this.props.items)try{let a=this.props.condition;a&&a.then&&(a=await a);let i=await this.props.items({...a,[this.props.valueField]:e},{cache:!0,limit:1,online:!0});i.length>0&&(t=i[0])}catch(e){console.error(e.message)}return t}async getSelectedItem(e){let t;return this.props.multiple?(t=[],e&&(Array.isArray(e)||(e=[e]),e=[...new Set(e)],t=await Promise.all(e.filter(e=>!!e).map(e=>this.getItem(e))))):t=await this.getItem(e),t}async fetchData(e,t,a={limit:20,online:!0,cache:!1}){let i;if(Array.isArray(this.props.items)&&(i=this.props.items),i)this.setState({items:i},t);else if("function"==typeof this.props.items){this.setState({loading:!0});try{if(!e&&this._all_)i=this._all_;else{let t=await this.getCondition();i=await this.props.items({...t,...e,status:!0},a)}Array.isArray(i)&&(!e&&i.length>0&&(this._all_=i),this.setState({items:i},t))}catch(e){console.error(e.message)}finally{this.setState({loading:!1})}}}async handleValueChanged(e){if(this.props.multiple){if(e.length>0&&e[e.length-1].action_text){let t=e[e.length-1],a=t.inputValue;const i=await this.props.getListModel();if(i){let n,o;o=await this.getCondition(),n=Object.assign({},{[this.props.valueField]:a},o||{}),this.props.labelField&&(n[this.props.labelField]=a),i.quickAdd(n,a=>{let i=this.state.items;this._all_&&(i=this._all_,i.push(a));for(let e in a)t[e]=a[e];delete t.action_text,delete t.inputValue;let n=e.map(e=>e[this.props.valueField]);n=[...new Set(n)],this.setState({itemSelected:e,value:n},()=>{this.props.onValueChanged&&this.props.onValueChanged(n,e,e)})})}}else{let t=e.map(e=>e[this.props.valueField]);t=[...new Set(t)],this.setState({itemSelected:e,value:t},()=>{this.props.onValueChanged&&this.props.onValueChanged(t,e,e)})}return}let t,a;if(e){if(e.action_text){const i=await this.props.getListModel();if(i){let n,o;o=await this.getCondition(),n=Object.assign({},{[this.props.valueField]:e.inputValue},o||{}),this.props.labelField&&(n[this.props.labelField]=e.inputValue),i.quickAdd(n,e=>{let i=this.state.items;this._all_&&(i=this._all_,i.push(e)),t=e[this.props.valueField],a=e[this.props.labelField||this.props.valueField],this.setState({items:i,value:t,itemSelected:e},()=>{this.props.onValueChanged&&this.props.onValueChanged(t,a,e)})})}return}if(e.open_list){let i=await this.getCondition();return void this.context.objectPicker(this.props.model,"",{condition:i,defaultData:{...i},callback:i=>{t=i[this.props.valueField],a=i[this.props.labelField||this.props.valueField],this.setState({value:t,itemSelected:e},()=>{this.props.onValueChanged&&this.props.onValueChanged(t,a,e)})}})}t=e[this.props.valueField],a=e[this.props.labelField||this.props.valueField]}else t=null,a="";this.setState({value:t,itemSelected:e},()=>{this.props.onValueChanged&&this.props.onValueChanged(t,a,e)})}render(){return!this.props.disabled&&!this.props.readOnly||this.props.multiple?n.a.createElement(z,{id:this.props.id,multiple:this.props.multiple,options:this.state.items,fullWidth:this.props.fullWidth,loading:this.state.loading,value:this.state.itemSelected,required:this.props.required,disabled:this.props.disabled||this.props.readOnly,autoSelect:!1,autoHighlight:!0,getOptionSelected:e=>e[this.props.valueField]==this.state.value,onChange:(e,t)=>this.handleValueChanged(t),inputValue:this.state.inputValue,onOpen:()=>{0===this.state.items.length&&this.fetchData()},filterOptions:(e,t)=>{t.inputValue||(t.inputValue="");let a=this.filter(e,t);if(this.props.model){if(""!==t.inputValue){let e={inputValue:t.inputValue};e.action_text=`Thêm "${t.inputValue}"`,a.push(e)}let e={open_list:"Mở danh mục"};a.push(e)}return a},onInputChange:(e,t)=>{this.setState({inputValue:t},async()=>{if(!e||!e.nativeEvent||"click"!=e.type)if(t&&t.length>=1){if(this.filter(this.state.items,{inputValue:t}).length>0)return;let e={$or:[]};this.props.field4Search?this.props.field4Search.split(",").filter(e=>e&&"_id"!==e).forEach(a=>{e.$or.push({[a]:{$regex:t,$options:"i"}})}):("_id"!==this.props.valueField&&e.$or.push({[this.props.valueField]:{$regex:("account"===this.props.model?"^":"")+t,$options:"i"}}),this.props.labelField&&"_id"!==this.props.labelField&&e.$or.push({[this.props.labelField]:{$regex:t,$options:"i"}})),0!==e.$or.length&&this.props.field4Search||e.$or.push({$text:{$search:t}}),this.fetchData(e)}else this._all_&&this.setState({items:this._all_})})},getOptionLabel:e=>{if(!e)return null;if(this.props.getOptionLabel)return this.props.getOptionLabel(e);{let t=e[this.props.labelField||this.props.valueField]||"",a=(e[this.props.valueField]||"").toString();return"account"===this.props.model?""+a:""+t}},renderOption:e=>{let t=e[this.props.labelField||this.props.valueField]||e.action_text||e.open_list||"";if(e.action_text||e.open_list)return n.a.createElement(l.a,{variant:"outlined",color:"primary",size:"small",fullWidth:!0},t);if(this.props.renderOption)return this.props.renderOption(e);if(this.props.field4Search)return n.a.createElement("div",{style:{width:"100%"}},this.props.field4Search.split(",").filter(t=>t&&e[t]).map((t,a)=>0===a?n.a.createElement("div",{style:{fontWeight:400},key:a.toString()},e[t]):n.a.createElement("div",{key:a.toString()},n.a.createElement("small",null,e[t]))));{let a=(e[this.props.valueField]||"").toString();return n.a.createElement("div",{style:{width:"100%"}},t,!!this.props.labelField&&"_id"!==this.props.valueField&&a&&n.a.createElement("small",null," (",a,")"))}},renderInput:e=>n.a.createElement(o.a,Y({},e,{required:this.props.required,InputLabelProps:{shrink:!0},label:this.props.inputLabel})),PaperComponent:({children:e})=>n.a.createElement(r.a,{style:{padding:0,backgroundColor:"#F3F2F3"},elevation:2},e)}):n.a.createElement(o.a,{fullWidth:!0,value:(this.state.itemSelected||{})[this.props.labelField||this.props.valueField]||"",readOnly:!0,InputLabelProps:{shrink:!0},label:this.props.inputLabel})}}J.propTypes={id:x.a.string,getListModel:x.a.func.isRequired,onValueChanged:x.a.func,model:x.a.string,condition:x.a.any,value:x.a.any,label:x.a.string,required:x.a.bool,disabled:x.a.bool,fullWidth:x.a.bool,multiple:x.a.bool,valueField:x.a.string.isRequired,labelField:x.a.string,inputLabel:x.a.string,field4Search:x.a.string,renderOption:x.a.func,getOptionLabel:x.a.func,readOnly:x.a.bool,items:x.a.any.isRequired},J.contextType=X.a;t.a=U(J)}},0,[0,4,1,2,18]]);