(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{1610:function(t,e,n){"use strict";var a=n(371),r=n(372);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(1)),o=(0,a(n(373)).default)(i.createElement("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"}),"Fullscreen");e.default=o},1611:function(t,e,n){"use strict";var a=n(371),r=n(372);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(1)),o=(0,a(n(373)).default)(i.createElement("path",{d:"M6 19h12v2H6z"}),"Minimize");e.default=o},1612:function(t,e,n){"use strict";var a=n(371),r=n(372);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(1)),o=(0,a(n(373)).default)(i.createElement("path",{d:"M3 3h18v2H3z"}),"Maximize");e.default=o},1730:function(t,e,n){"use strict";n.r(e);var a=n(1),r=n.n(a),i=n(481),o=n(1611),s=n.n(o),l=n(1612),c=n.n(l),d=n(1610),u=n.n(d),p=n(669),h=n(397),f=n.n(h),m=n(501),g=n(374),v=n(55),b=n.n(v);class y extends r.a.PureComponent{constructor(t){super(t),this.state={load:0,chatGroups:[],ChatRoom:null},this.open=this.open.bind(this),this.minimizeChat=this.minimizeChat.bind(this),this.closeChat=this.closeChat.bind(this)}async componentDidMount(){const{default:t}=await Promise.all([n.e(4),n.e(10),n.e(12),n.e(16),n.e(37)]).then(n.bind(null,697));this.setState({ChatRoom:t})}async open(t,e={}){if(!t)return;let{chatGroups:n}=this.state,a=n.find(e=>e.id_link===t.id_link);if(a)(t=a).minimizeChat=!t.minimizeChat;else{if(!(t.title&&t.code_link&&t.attends&&t.phu_trach)){let e=await this.context.apis.asyncGetData(this.context.userInfo.token,"message2setting",{id_link:t.id_link});e&&(t=e)}t.minimizeChat=e.minimize,n.push(t),this.setState({load:this.state.load+1})}t.minimizeChat||this.state.chatGroups.forEach(e=>{e.id_link!==t.id_link&&(e.minimizeChat=!0)}),this.setState({load:this.state.load+1})}minimizeChat(t){t.minimizeChat=!t.minimizeChat,t.minimizeChat||this.state.chatGroups.forEach(e=>{e.id_link!==t.id_link&&(e.minimizeChat=!0)}),this.setState({load:this.state.load+1})}closeChat(t){let e=this.state.chatGroups.filter(e=>e.id_link!==t.id_link);this.setState({chatGroups:e,load:this.state.load+1})}fullChat(t){this.closeChat(t),this.props.history?this.props.history.push("/chat?id_link="+t.id_link):window.location.href="#/chat?id_link="+t.id_link}render(){let{chatGroups:t}=this.state;return r.a.createElement("div",{style:{width:300,bottom:15,right:15,margin:0,top:"auto",left:"auto",zIndex:9e8,position:"fixed",maxHeight:'calc("100vh - 150px")',overflow:"auto",display:"flex",flexDirection:"column"}},t.map(t=>r.a.createElement("div",{key:t.id_link,style:{height:t.minimizeChat?50:410,overflow:"auto",marginBottom:1}},r.a.createElement(i.a,{elevation:2,backgroundColor:this.context.config.primaryColor,style:{height:"100%",margin:0},contentStyle:{padding:1},title:""+(t.title||this.context.apis.getLabel("Thảo luận")),actions:r.a.createElement(m.a,{idLink:t.id_link},r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement(p.a,{size:"small",onClick:()=>this.fullChat(t)},r.a.createElement(u.a,{style:{fontSize:24,color:this.context.config.mainTextColor}})),r.a.createElement(p.a,{size:"small",style:{marginLeft:5},onClick:()=>this.minimizeChat(t)},t.minimizeChat?r.a.createElement(c.a,{style:{fontSize:24,color:this.context.config.mainTextColor}}):r.a.createElement(s.a,{style:{fontSize:24,color:this.context.config.mainTextColor}})),r.a.createElement(p.a,{size:"small",style:{marginLeft:5},onClick:()=>this.closeChat(t)},r.a.createElement(f.a,{style:{fontSize:24,color:this.context.config.mainTextColor}}))))},this.state.ChatRoom&&r.a.createElement(this.state.ChatRoom,{idLink:t.id_link,codeLink:t.code_link,attends:t.attends,phuTrach:t.phu_trach,minimize:t.minimizeChat})))))}}y.contextType=g.a,y.propTypes={history:b.a.any},e.default=y},371:function(t,e){t.exports=function(t){return t&&t.__esModule?t:{default:t}},t.exports.default=t.exports,t.exports.__esModule=!0},372:function(t,e,n){var a=n(410).default;function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}t.exports=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==a(t)&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n},t.exports.default=t.exports,t.exports.__esModule=!0},373:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return a.createSvgIcon}});var a=n(396)},381:function(t,e,n){"use strict";function a(t,e){return function(){return null}}n.d(e,"a",(function(){return a}))},387:function(t,e,n){"use strict";function a(t){return function(){return null}}n.d(e,"a",(function(){return a}))},389:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var a=n(1);function r(t){var e=a.useState(t),n=e[0],r=e[1],i=t||n;return a.useEffect((function(){null==n&&r("mui-".concat(Math.round(1e5*Math.random())))}),[n]),i}},392:function(t,e,n){"use strict";function a(t,e,n,a,r){return null}n.d(e,"a",(function(){return a}))},396:function(t,e,n){"use strict";n.r(e);var a=n(378);n.d(e,"capitalize",(function(){return a.a}));var r=n(407);n.d(e,"createChainedFunction",(function(){return r.a}));var i=n(383);n.d(e,"createSvgIcon",(function(){return i.a}));var o=n(412);n.d(e,"debounce",(function(){return o.a}));var s=n(381);n.d(e,"deprecatedPropType",(function(){return s.a}));var l=n(413);n.d(e,"isMuiElement",(function(){return l.a}));var c=n(404);n.d(e,"ownerDocument",(function(){return c.a}));var d=n(416);n.d(e,"ownerWindow",(function(){return d.a}));var u=n(387);n.d(e,"requirePropFactory",(function(){return u.a}));var p=n(402);n.d(e,"setRef",(function(){return p.a}));var h=n(392);n.d(e,"unsupportedProp",(function(){return h.a}));var f=n(405);n.d(e,"useControlled",(function(){return f.a}));var m=n(406);n.d(e,"useEventCallback",(function(){return m.a}));var g=n(382);n.d(e,"useForkRef",(function(){return g.a}));var v=n(389);n.d(e,"unstable_useId",(function(){return v.a}));var b=n(411);n.d(e,"useIsFocusVisible",(function(){return b.a}))},397:function(t,e,n){"use strict";var a=n(371),r=n(372);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(1)),o=(0,a(n(373)).default)(i.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");e.default=o},410:function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(t.exports=n=function(t){return typeof t},t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.default=t.exports,t.exports.__esModule=!0),n(e)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},481:function(t,e,n){"use strict";var a=n(1),r=n.n(a),i=n(1707),o=n(1703),s=n(1709),l=n(55),c=n.n(l),d=n(374),u=n(401);class p extends r.a.PureComponent{render(){const{title:t,children:e,icon:n,style:a,brightenFirst:l}=this.props;let c=this.props.backgroundColor||this.context.config.secondaryColor,d=Object(u.gradientBackgroundStyle)(c,{brightenFirst:l||this.context.config.fragBrightenFirst||50,brightenSecond:this.context.config.fragBrightenSecond}),p=d.color,h=d.backgroundImage;a&&"100%"===a.height&&a.padding&&(a.height=`calc(100% - ${2*a.padding}px)`);let f=Object.assign({margin:10,padding:0,backgroundImage:h,color:this.context.config.mainColor,display:"flex",flexDirection:"column"},a);return r.a.createElement(i.a,{elevation:this.props.elevation||0,style:f},(!!t||this.props.actions)&&r.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",padding:5}},!!n&&n,this.props.onTitleClick?r.a.createElement(o.a,{size:"small",onClick:this.props.onTitleClick,style:{marginLeft:5,color:p,flex:1}},r.a.createElement(s.a,{variant:"subtitle1",noWrap:!0},t||"")):r.a.createElement(s.a,{variant:"subtitle1",noWrap:!0,style:{marginLeft:5,color:p,flex:1}},t||""),!!this.props.actions&&this.props.actions),r.a.createElement("div",{style:{flex:1,overflow:"auto",overflowX:"hidden",paddingLeft:10,paddingRight:10,paddingBottom:10,...this.props.contentStyle}},e))}}p.propTypes={title:c.a.string,onTitleClick:c.a.func,children:c.a.any,icon:c.a.any,style:c.a.any,contentStyle:c.a.any,backgroundColor:c.a.string,brightenFirst:c.a.number,actions:c.a.any,elevation:c.a.number},p.contextType=d.a,e.a=p},501:function(t,e,n){"use strict";var a=n(1),r=n.n(a),i=n(55),o=n.n(i),s=n(374),l=n(401),c=n(730),d=n(576),u=n.n(d);function p(){return(p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t}).apply(this,arguments)}class h extends r.a.PureComponent{constructor(t){super(t),this.state={load:0,number:0},this.handleReceivedMsg=this.handleReceivedMsg.bind(this)}async componentDidMount(){this.handleReceivedMsg(),l.EmitEvents.subscribe(`message2_group_${this.props.idLink}_changed`,this.handleReceivedMsg)}componentWillUnmount(){l.EmitEvents.unsubscribe(`message2_group_${this.props.idLink}_changed`,this.handleReceivedMsg)}componentDidUpdate(t){t.idApp===this.props.idApp&&t.idLink===this.props.idLink||this.handleReceivedMsg()}async handleReceivedMsg(){let t=`${this.context.config.server_url}/api/${this.context.config.id_app}/message2/unread/${this.props.idLink}?access_token=${this.context.userInfo.token}`;try{let e=await this.context.apis.asyncGet(t);e=JSON.parse(e),this.props.onChange&&this.props.onChange(e.unread||0),this.setState({load:this.state.load+1,number:e.unread||0})}catch(t){console.error(t)}}render(){let{number:t}=this.state;return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{title:`${t>0?"("+t+") ":""}${this.context.appInfo.name}`}),r.a.createElement(c.a,{badgeContent:t,color:"error",variant:this.props.variant},this.props.children))}}h.contextType=s.a,h.propTypes={idApp:o.a.string,match:o.a.any,history:o.a.any,children:o.a.any,location:o.a.any,idLink:o.a.string,mediaQueryMatches:o.a.bool,variant:o.a.string,onChange:o.a.func};class f extends r.a.PureComponent{render(){return r.a.createElement(s.a.Consumer,null,({appInfo:t})=>t?r.a.createElement(h,p({idApp:t._id},this.props)):null)}}f.propTypes={idLink:o.a.string},f.contextType=s.a,e.a=f},669:function(t,e,n){"use strict";var a=n(12),r=n(368),i=n(1),o=(n(55),n(369)),s=n(370),l=n(395),c=n(1752),d=n(378),u=i.forwardRef((function(t,e){var n=t.edge,s=void 0!==n&&n,l=t.children,u=t.classes,p=t.className,h=t.color,f=void 0===h?"default":h,m=t.disabled,g=void 0!==m&&m,v=t.disableFocusRipple,b=void 0!==v&&v,y=t.size,x=void 0===y?"medium":y,C=Object(r.a)(t,["edge","children","classes","className","color","disabled","disableFocusRipple","size"]);return i.createElement(c.a,Object(a.a)({className:Object(o.a)(u.root,p,"default"!==f&&u["color".concat(Object(d.a)(f))],g&&u.disabled,"small"===x&&u["size".concat(Object(d.a)(x))],{start:u.edgeStart,end:u.edgeEnd}[s]),centerRipple:!0,focusRipple:!b,disabled:g,ref:e},C),i.createElement("span",{className:u.label},l))}));e.a=Object(s.a)((function(t){return{root:{textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:12,borderRadius:"50%",overflow:"visible",color:t.palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{backgroundColor:Object(l.a)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{backgroundColor:"transparent",color:t.palette.action.disabled}},edgeStart:{marginLeft:-12,"$sizeSmall&":{marginLeft:-3}},edgeEnd:{marginRight:-12,"$sizeSmall&":{marginRight:-3}},colorInherit:{color:"inherit"},colorPrimary:{color:t.palette.primary.main,"&:hover":{backgroundColor:Object(l.a)(t.palette.primary.main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},colorSecondary:{color:t.palette.secondary.main,"&:hover":{backgroundColor:Object(l.a)(t.palette.secondary.main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},disabled:{},sizeSmall:{padding:3,fontSize:t.typography.pxToRem(18)},label:{width:"100%",display:"flex",alignItems:"inherit",justifyContent:"inherit"}}}),{name:"MuiIconButton"})(u)},730:function(t,e,n){"use strict";n(400);var a=n(12),r=n(368),i=n(1),o=(n(55),n(369)),s=n(370),l=n(378),c=i.forwardRef((function(t,e){var n=t.anchorOrigin,s=void 0===n?{vertical:"top",horizontal:"right"}:n,c=t.badgeContent,d=t.children,u=t.classes,p=t.className,h=t.color,f=void 0===h?"default":h,m=t.component,g=void 0===m?"span":m,v=t.invisible,b=t.max,y=void 0===b?99:b,x=t.overlap,C=void 0===x?"rectangle":x,O=t.showZero,k=void 0!==O&&O,_=t.variant,z=void 0===_?"standard":_,E=Object(r.a)(t,["anchorOrigin","badgeContent","children","classes","className","color","component","invisible","max","overlap","showZero","variant"]),R=v;null==v&&(0===c&&!k||null==c&&"dot"!==z)&&(R=!0);var S="";return"dot"!==z&&(S=c>y?"".concat(y,"+"):c),i.createElement(g,Object(a.a)({className:Object(o.a)(u.root,p),ref:e},E),d,i.createElement("span",{className:Object(o.a)(u.badge,u["".concat(s.horizontal).concat(Object(l.a)(s.vertical),"}")],u["anchorOrigin".concat(Object(l.a)(s.vertical)).concat(Object(l.a)(s.horizontal)).concat(Object(l.a)(C))],"default"!==f&&u["color".concat(Object(l.a)(f))],R&&u.invisible,"dot"===z&&u.dot)},S))}));e.a=Object(s.a)((function(t){return{root:{position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0},badge:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(12),minWidth:20,lineHeight:1,padding:"0 6px",height:20,borderRadius:10,zIndex:1,transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.enteringScreen})},colorPrimary:{backgroundColor:t.palette.primary.main,color:t.palette.primary.contrastText},colorSecondary:{backgroundColor:t.palette.secondary.main,color:t.palette.secondary.contrastText},colorError:{backgroundColor:t.palette.error.main,color:t.palette.error.contrastText},dot:{borderRadius:4,height:8,minWidth:8,padding:0},anchorOriginTopRightRectangle:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%","&$invisible":{transform:"scale(0) translate(50%, -50%)"}},anchorOriginTopRightRectangular:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%","&$invisible":{transform:"scale(0) translate(50%, -50%)"}},anchorOriginBottomRightRectangle:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%","&$invisible":{transform:"scale(0) translate(50%, 50%)"}},anchorOriginBottomRightRectangular:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%","&$invisible":{transform:"scale(0) translate(50%, 50%)"}},anchorOriginTopLeftRectangle:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%","&$invisible":{transform:"scale(0) translate(-50%, -50%)"}},anchorOriginTopLeftRectangular:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%","&$invisible":{transform:"scale(0) translate(-50%, -50%)"}},anchorOriginBottomLeftRectangle:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%","&$invisible":{transform:"scale(0) translate(-50%, 50%)"}},anchorOriginBottomLeftRectangular:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%","&$invisible":{transform:"scale(0) translate(-50%, 50%)"}},anchorOriginTopRightCircle:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%","&$invisible":{transform:"scale(0) translate(50%, -50%)"}},anchorOriginTopRightCircular:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%","&$invisible":{transform:"scale(0) translate(50%, -50%)"}},anchorOriginBottomRightCircle:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%","&$invisible":{transform:"scale(0) translate(50%, 50%)"}},anchorOriginBottomRightCircular:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%","&$invisible":{transform:"scale(0) translate(50%, 50%)"}},anchorOriginTopLeftCircle:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%","&$invisible":{transform:"scale(0) translate(-50%, -50%)"}},anchorOriginTopLeftCircular:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%","&$invisible":{transform:"scale(0) translate(-50%, -50%)"}},anchorOriginBottomLeftCircle:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%","&$invisible":{transform:"scale(0) translate(-50%, 50%)"}},anchorOriginBottomLeftCircular:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%","&$invisible":{transform:"scale(0) translate(-50%, 50%)"}},invisible:{transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.leavingScreen})}}}),{name:"MuiBadge"})(c)}}]);