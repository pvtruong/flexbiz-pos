(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{1731:function(t,e,n){"use strict";n.r(e);var r=n(1),o=n.n(r),a=n(55),i=n.n(a),s=n(1703),c=n(1755),l=n(480),u=n(1714),d=n(1715),f=n(437),p=n(374),h=n(403),m=n(397),x=n.n(m);const g={paper:{marginTop:0,display:"flex",flexDirection:"column",alignItems:"center",overflow:"hidden"},form:{width:"100%",marginTop:1},submit:{margin:"3 0 2 0"}};class y extends o.a.Component{constructor(t){super(t),this.state={dialogOpen:!1,phone:"",otpInfo:null},this.submit=this.submit.bind(this),this.verify=this.verify.bind(this),this.showForm=this.showForm.bind(this),this.options={}}async componentDidMount(){}showForm(t,e,n={}){this.onSuccess=t,this.onError=e,this.options=n,this.setState({dialogOpen:!0,otpInfo:null,phone:n.phone||""},()=>{this.state.phone&&this.submit()})}handleClose(){this.setState({dialogOpen:!1})}cancel(){this.options&&!1===this.options.allow_cancel||(this.setState({dialogOpen:!1}),this.onError&&this.onError("The user has canceled the login"))}onKeyPress(t){"Enter"===t.key&&(this.state.otpInfo?this.verify():this.submit(),t.preventDefault())}async submit(){const{getLabel:t,asyncLoginSms:e}=this.context.apis;let n=this.state.phone;if(n){this.setState({error:"",otp_number:""}),this.context.setProgressStatus(!0,null,this.context.apis.getLabel("Đang gửi mã số xác thực tới "+n));try{let t=JSON.parse(await e(n));this.setState({error:"",otpInfo:t}),this.context.setProgressStatus(!1)}catch(t){this.setState({error:t.message}),this.context.setProgressStatus(!1)}}else this.setState({error:t("Bạn chưa nhập số điện thoại hoặc email")})}async verify(){const{getLabel:t,asyncLoginSmsVerify:e}=this.context.apis;let{otp_number:n,otpInfo:r}=this.state;if(n){this.context.setProgressStatus(!0);try{let t=await e(r._id,n,{once:this.options.once});this.setState({error:"",otpInfo:null,dialogOpen:!1}),this.onSuccess&&this.onSuccess(t),this.context.setProgressStatus(!1)}catch(t){this.setState({error:t.message}),this.context.setProgressStatus(!1)}}else this.setState({error:t("Bạn chưa nhập mã số xác thực")})}dialog(){return o.a.createElement(u.a,{fullScreen:this.props.mediaQueryMatches,fullWidth:!0,maxWidth:"sm",open:this.state.dialogOpen,onClose:()=>this.cancel()},o.a.createElement(f.a,{style:{backgroundColor:this.context.config.formHeaderColor,color:this.context.config.mainTextColor}},o.a.createElement(l.a,{container:!0,direction:"row",justify:"space-between"},o.a.createElement(l.a,{item:!0},this.context.apis.getLabel("Xác thực")),o.a.createElement(l.a,{item:!0},o.a.createElement(s.a,{onClick:()=>this.cancel(),style:{color:this.context.config.mainTextColor}},o.a.createElement(x.a,{style:{color:"silver"}}))))),o.a.createElement(d.a,null,o.a.createElement("div",{style:g.paper},this.state.otpInfo?o.a.createElement("form",{style:g.form,noValidate:!0},o.a.createElement(c.a,{variant:"outlined",margin:"normal",required:!0,type:"number",fullWidth:!0,label:this.context.apis.getLabel("Mã số xác thực"),helperText:this.context.apis.getLabel("Nhập mã số xác thực mà bạn nhận được"),autoComplete:"off",autoFocus:!0,value:this.state.otp_number,onKeyPress:this.onKeyPress.bind(this),onChange:t=>this.setState({otp_number:t.target.value})}),o.a.createElement("div",{style:{color:"red",textAlign:"center",padding:10},dangerouslySetInnerHTML:{__html:this.state.error}}),o.a.createElement("div",{style:{display:"flex",justifyContent:"center",marginBottom:20}},o.a.createElement(s.a,{type:"Button",variant:"contained",color:"primary",size:"lg",fullWidth:!0,disabled:!this.state.otp_number,onClick:this.verify,style:g.submit},this.context.apis.getLabel("Xác thực"))),o.a.createElement("div",{style:{display:"flex",justifyContent:"center",marginBottom:20}},o.a.createElement(s.a,{type:"Button",fullWidth:!0,onClick:this.submit,style:g.submit},this.context.apis.getLabel("Gửi lại mã số xác thực"))),!this.options.phone&&o.a.createElement("div",{style:{display:"flex",justifyContent:"center",marginBottom:20}},o.a.createElement(s.a,{type:"Button",fullWidth:!0,onClick:()=>this.setState({otpInfo:null,otp_number:"",phone:""}),style:g.submit},this.context.apis.getLabel("Nhập số điện thoại hoặc email khác")))):o.a.createElement("form",{style:g.form,noValidate:!0},o.a.createElement(c.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:this.context.apis.getLabel("Số điện thoại hoặc email"),disabled:this.options.phone,autoComplete:"phone",autoFocus:!0,value:this.state.phone,onKeyPress:this.onKeyPress.bind(this),onChange:t=>this.setState({phone:t.target.value})}),o.a.createElement("div",{style:{color:"red",textAlign:"center",padding:10},dangerouslySetInnerHTML:{__html:this.state.error}}),o.a.createElement("div",{style:{display:"flex",justifyContent:"center",marginBottom:20}},o.a.createElement(s.a,{type:"Button",variant:"contained",color:"primary",size:"lg",fullWidth:!0,disabled:!this.state.phone,onClick:this.submit,style:g.submit},this.context.apis.getLabel("Gửi mã số xác thực")))))))}render(){return this.dialog()}}y.contextType=p.a,y.propTypes={mediaQueryMatches:i.a.bool},e.default=Object(h.a)("(max-width:480px)")(y)},371:function(t,e){t.exports=function(t){return t&&t.__esModule?t:{default:t}},t.exports.default=t.exports,t.exports.__esModule=!0},372:function(t,e,n){var r=n(410).default;function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}t.exports=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var s=a?Object.getOwnPropertyDescriptor(t,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=t[i]}return n.default=t,e&&e.set(t,n),n},t.exports.default=t.exports,t.exports.__esModule=!0},373:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(396)},381:function(t,e,n){"use strict";function r(t,e){return function(){return null}}n.d(e,"a",(function(){return r}))},387:function(t,e,n){"use strict";function r(t){return function(){return null}}n.d(e,"a",(function(){return r}))},389:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(1);function o(t){var e=r.useState(t),n=e[0],o=e[1],a=t||n;return r.useEffect((function(){null==n&&o("mui-".concat(Math.round(1e5*Math.random())))}),[n]),a}},392:function(t,e,n){"use strict";function r(t,e,n,r,o){return null}n.d(e,"a",(function(){return r}))},396:function(t,e,n){"use strict";n.r(e);var r=n(378);n.d(e,"capitalize",(function(){return r.a}));var o=n(407);n.d(e,"createChainedFunction",(function(){return o.a}));var a=n(383);n.d(e,"createSvgIcon",(function(){return a.a}));var i=n(412);n.d(e,"debounce",(function(){return i.a}));var s=n(381);n.d(e,"deprecatedPropType",(function(){return s.a}));var c=n(413);n.d(e,"isMuiElement",(function(){return c.a}));var l=n(404);n.d(e,"ownerDocument",(function(){return l.a}));var u=n(416);n.d(e,"ownerWindow",(function(){return u.a}));var d=n(387);n.d(e,"requirePropFactory",(function(){return d.a}));var f=n(402);n.d(e,"setRef",(function(){return f.a}));var p=n(392);n.d(e,"unsupportedProp",(function(){return p.a}));var h=n(405);n.d(e,"useControlled",(function(){return h.a}));var m=n(406);n.d(e,"useEventCallback",(function(){return m.a}));var x=n(382);n.d(e,"useForkRef",(function(){return x.a}));var g=n(389);n.d(e,"unstable_useId",(function(){return g.a}));var y=n(411);n.d(e,"useIsFocusVisible",(function(){return y.a}))},397:function(t,e,n){"use strict";var r=n(371),o=n(372);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(n(1)),i=(0,r(n(373)).default)(a.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");e.default=i},403:function(t,e,n){"use strict";var r=n(1),o=n.n(r),a=n(55),i=n.n(a),s=n(504);function c(){return(c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}e.a=(...t)=>e=>n=>{const r=Object(s.a)(...t),a=t=>{const{forwardedRef:n,...a}=t;return o.a.createElement(e,c({ref:n},a,{mediaQueryMatches:r}))};return a.propTypes={forwardedRef:i.a.any},o.a.createElement(a,n)}},410:function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(t.exports=n=function(t){return typeof t},t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.default=t.exports,t.exports.__esModule=!0),n(e)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},437:function(t,e,n){"use strict";var r=n(12),o=n(368),a=n(1),i=(n(55),n(369)),s=n(370),c=n(1709),l=a.forwardRef((function(t,e){var n=t.children,s=t.classes,l=t.className,u=t.disableTypography,d=void 0!==u&&u,f=Object(o.a)(t,["children","classes","className","disableTypography"]);return a.createElement("div",Object(r.a)({className:Object(i.a)(s.root,l),ref:e},f),d?n:a.createElement(c.a,{component:"h2",variant:"h6"},n))}));e.a=Object(s.a)({root:{margin:0,padding:"16px 24px",flex:"0 0 auto"}},{name:"MuiDialogTitle"})(l)},480:function(t,e,n){"use strict";var r=n(368),o=n(12),a=n(1),i=(n(55),n(369)),s=n(370),c=[0,1,2,3,4,5,6,7,8,9,10],l=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12];function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=parseFloat(t);return"".concat(n/e).concat(String(t).replace(String(n),"")||"px")}var d=a.forwardRef((function(t,e){var n=t.alignContent,s=void 0===n?"stretch":n,c=t.alignItems,l=void 0===c?"stretch":c,u=t.classes,d=t.className,f=t.component,p=void 0===f?"div":f,h=t.container,m=void 0!==h&&h,x=t.direction,g=void 0===x?"row":x,y=t.item,v=void 0!==y&&y,b=t.justify,w=t.justifyContent,S=void 0===w?"flex-start":w,j=t.lg,E=void 0!==j&&j,C=t.md,M=void 0!==C&&C,O=t.sm,_=void 0!==O&&O,P=t.spacing,W=void 0===P?0:P,I=t.wrap,L=void 0===I?"wrap":I,k=t.xl,T=void 0!==k&&k,B=t.xs,z=void 0!==B&&B,D=t.zeroMinWidth,F=void 0!==D&&D,N=Object(r.a)(t,["alignContent","alignItems","classes","className","component","container","direction","item","justify","justifyContent","lg","md","sm","spacing","wrap","xl","xs","zeroMinWidth"]),G=Object(i.a)(u.root,d,m&&[u.container,0!==W&&u["spacing-xs-".concat(String(W))]],v&&u.item,F&&u.zeroMinWidth,"row"!==g&&u["direction-xs-".concat(String(g))],"wrap"!==L&&u["wrap-xs-".concat(String(L))],"stretch"!==l&&u["align-items-xs-".concat(String(l))],"stretch"!==s&&u["align-content-xs-".concat(String(s))],"flex-start"!==(b||S)&&u["justify-content-xs-".concat(String(b||S))],!1!==z&&u["grid-xs-".concat(String(z))],!1!==_&&u["grid-sm-".concat(String(_))],!1!==M&&u["grid-md-".concat(String(M))],!1!==E&&u["grid-lg-".concat(String(E))],!1!==T&&u["grid-xl-".concat(String(T))]);return a.createElement(p,Object(o.a)({className:G,ref:e},N))})),f=Object(s.a)((function(t){return Object(o.a)({root:{},container:{boxSizing:"border-box",display:"flex",flexWrap:"wrap",width:"100%"},item:{boxSizing:"border-box",margin:"0"},zeroMinWidth:{minWidth:0},"direction-xs-column":{flexDirection:"column"},"direction-xs-column-reverse":{flexDirection:"column-reverse"},"direction-xs-row-reverse":{flexDirection:"row-reverse"},"wrap-xs-nowrap":{flexWrap:"nowrap"},"wrap-xs-wrap-reverse":{flexWrap:"wrap-reverse"},"align-items-xs-center":{alignItems:"center"},"align-items-xs-flex-start":{alignItems:"flex-start"},"align-items-xs-flex-end":{alignItems:"flex-end"},"align-items-xs-baseline":{alignItems:"baseline"},"align-content-xs-center":{alignContent:"center"},"align-content-xs-flex-start":{alignContent:"flex-start"},"align-content-xs-flex-end":{alignContent:"flex-end"},"align-content-xs-space-between":{alignContent:"space-between"},"align-content-xs-space-around":{alignContent:"space-around"},"justify-content-xs-center":{justifyContent:"center"},"justify-content-xs-flex-end":{justifyContent:"flex-end"},"justify-content-xs-space-between":{justifyContent:"space-between"},"justify-content-xs-space-around":{justifyContent:"space-around"},"justify-content-xs-space-evenly":{justifyContent:"space-evenly"}},function(t,e){var n={};return c.forEach((function(r){var o=t.spacing(r);0!==o&&(n["spacing-".concat(e,"-").concat(r)]={margin:"-".concat(u(o,2)),width:"calc(100% + ".concat(u(o),")"),"& > $item":{padding:u(o,2)}})})),n}(t,"xs"),t.breakpoints.keys.reduce((function(e,n){return function(t,e,n){var r={};l.forEach((function(t){var e="grid-".concat(n,"-").concat(t);if(!0!==t)if("auto"!==t){var o="".concat(Math.round(t/12*1e8)/1e6,"%");r[e]={flexBasis:o,flexGrow:0,maxWidth:o}}else r[e]={flexBasis:"auto",flexGrow:0,maxWidth:"none"};else r[e]={flexBasis:0,flexGrow:1,maxWidth:"100%"}})),"xs"===n?Object(o.a)(t,r):t[e.breakpoints.up(n)]=r}(e,t,n),e}),{}))}),{name:"MuiGrid"})(d);e.a=f},504:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(12),o=n(1),a=n(1701),i=n(1702);function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(a.a)(),s=Object(i.a)({theme:n,name:"MuiUseMediaQuery",props:{}});var c="function"==typeof t?t(n):t;c=c.replace(/^@media( ?)/m,"");var l="undefined"!=typeof window&&void 0!==window.matchMedia,u=Object(r.a)({},s,e),d=u.defaultMatches,f=void 0!==d&&d,p=u.matchMedia,h=void 0===p?l?window.matchMedia:null:p,m=u.noSsr,x=void 0!==m&&m,g=u.ssrMatchMedia,y=void 0===g?null:g,v=o.useState((function(){return x&&l?h(c).matches:y?y(c).matches:f})),b=v[0],w=v[1];return o.useEffect((function(){var t=!0;if(l){var e=h(c),n=function(){t&&w(e.matches)};return n(),e.addListener(n),function(){t=!1,e.removeListener(n)}}}),[c,h,l]),b}}}]);