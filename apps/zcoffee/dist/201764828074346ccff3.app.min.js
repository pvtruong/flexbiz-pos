(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1407:function(e,t,n){"use strict";var a=n(17);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),l=(0,a(n(19)).default)(i.default.createElement("path",{d:"M19 13H5v-2h14v2z"}),"Remove");t.default=l},1408:function(e,t,n){"use strict";var a=n(17);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),l=(0,a(n(19)).default)(i.default.createElement("path",{d:"M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"}),"List");t.default=l},1431:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),l=n(605),r=n(218),o=n(489),c=n.n(o),s=n(1407),u=n.n(s),h=n(120),d=n.n(h),p=n(280),m=n(371),f=n(372),g=n(606),_=n(1),y=n.n(_),b=n(196),v=n(1209),k=n(1193),x=n(1408),C=n.n(x),E=n(1190),O=n(1192),L=n(1208),w=n(9),P=n(131),j=n(18),S=n(378);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t,n,a,i,l,r){try{var o=e[l](r),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(a,i)}function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){G(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?N(e):t}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(s,e);var t,n,a,o=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,a=V(e);if(t()){var i=V(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return M(this,n)}}(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=o.call(this,e)).handleValueChanged=t.handleValueChanged.bind(N(t)),t.handleGhiChuChanged=t.handleGhiChuChanged.bind(N(t)),t.handleTyLeCkChanged=t.handleTyLeCkChanged.bind(N(t)),t.handleTienCkChanged=t.handleTienCkChanged.bind(N(t)),t.pickNote=t.pickNote.bind(N(t)),t.state={open:t.props.open,disabled_discount:!0,load:0,detail:null},t}return t=s,(n=[{key:"open",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.callback=n,this.setState({title:e,open:!0,disabled_discount:!0,detail:R({},t),kho:a})}},{key:"close",value:function(){this.setState({open:!1})}},{key:"save",value:function(){if(this.callback){var e=this.state.detail;this.callback(e)}this.setState({open:!1})}},{key:"delete",value:function(){var e=this;this.context.alert(this.context.apis.getLabel("Bạn có chắc chắn xoá sản phẩm này không?"),(function(){e.callback&&e.callback(0),e.setState({open:!1})}))}},{key:"handleValueChanged",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.state.detail,a=n.sl_xuat;t?a+=e:a=e,a<0||this.state.kho&&this.state.kho.theo_doi_sl_ht&&a>n.sl_order||(n.sl_xuat=a,this.state.kho.theo_doi_sl_ht?n.sp_yeu_cau_che_bien?(n.sl_gui_bartender=0,n.sl_gui_bep=Math.max(a,n.sl_gui_bep)):n.sp_yeu_cau_pha_che?(n.sl_gui_bep=0,n.sl_gui_bartender=Math.max(a,n.sl_gui_bartender)):(n.sl_gui_bartender=0,n.sl_gui_bep=0,n.sl_order=a):(n.sl_order=a,n.sl_gui_bep=0,n.sl_gui_bartender=0),n.tien_hang_nt=n.sl_xuat*n.gia_ban_nt,n.ty_le_ck&&(n.tien_ck_nt=Math.round(n.tien_hang_nt*n.ty_le_ck/100,0)),n.tien_nt=n.tien_hang_nt-(n.tien_ck_nt||0),this.setState({detail:n,load:this.state.load+1}))}},{key:"handleOrderChanged",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.state.detail,a=n.sl_order||0;t?a+=e:a=e,a<(n.sl_ht||0)||(n.sl_order=a,this.setState({detail:n,load:this.state.load+1}))}},{key:"handleGhiChuChanged",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.state.detail;t&&n.ghi_chu?(", "+n.ghi_chu).toUpperCase().indexOf(", "+e.toUpperCase())<0&&(n.ghi_chu="".concat(n.ghi_chu,", ").concat(e)):n.ghi_chu=e,this.setState({detail:n,load:this.state.load+1})}},{key:"handleTyLeCkChanged",value:function(e){var t=this.state.detail;t.ty_le_ck=e,t.tien_ck_nt=Math.round(t.tien_hang_nt*t.ty_le_ck/100,0),this.setState({detail:t,load:this.state.load+1})}},{key:"handleTienCkChanged",value:function(e){var t=this.state.detail;t.tien_ck_nt=e,t.ty_le_ck=0,this.setState({detail:t,load:this.state.load+1})}},{key:"pickNote",value:function(){var e=this;this.refObjectPicker.open("note",this.context.apis.getLabel("Chọn một ghi chú"),function(){var t,n=(t=regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.handleGhiChuChanged(n.content,!0);case 1:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,i){var l=t.apply(e,n);function r(e){I(l,a,i,r,o,"next",e)}function o(e){I(l,a,i,r,o,"throw",e)}r(void 0)}))});return function(e){return n.apply(this,arguments)}}(),{id_link:"PBL"})}},{key:"editDiscount",value:function(){var e=this,t=this.state,n=t.kho,a=t.detail;if(!n.user_quan_ly)return this.context.alert(this.context.apis.getLabel("Chưa khai báo người quản lý cho cửa hàng này"));var i={ma_vt:a.ma_vt,time:new Date,id_app:this.context.config.id_app};this.context.sign("Nhập mật khẩu để ký xác nhận thay đổi chiết khấu",n.user_quan_ly,i,(function(t){a.sign_user=n.user_quan_ly,a.sign_data=i,a.signature=t,e.setState({disabled_discount:!1})}))}},{key:"render",value:function(){var e=this;if(!this.state.open||!this.state.detail)return null;var t=this.state,n=t.detail,a=t.disabled_discount,o=!!this.state.kho&&this.state.kho.theo_doi_sl_ht&&(n.sp_yeu_cau_che_bien||n.sp_yeu_cau_pha_che);return i.a.createElement(m.a,{maxWidth:o?"md":"sm",fullWidth:!0,open:this.state.open},i.a.createElement(g.a,{style:{backgroundColor:j.formHeaderColor,color:j.mainTextColor}},i.a.createElement("div",{style:{display:"flex",alignItems:"center"}},i.a.createElement("div",{style:{flexGrow:1}},i.a.createElement(p.a,null,this.state.title||this.context.apis.getLabel("Chi tiết"))),i.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-end",paddingLeft:10}},i.a.createElement(l.a,{style:{marginLeft:5},onClick:function(){return e.setState({open:!1})}},i.a.createElement(d.a,{style:{color:"silver"}}))))),i.a.createElement(f.a,{style:{padding:0}},i.a.createElement("div",{style:{margin:10}},i.a.createElement(b.a,{container:!0,spacing:1,style:{overflow:"hidden"}},o&&i.a.createElement(b.a,{item:!0,md:6,lg:6},i.a.createElement(E.a,{style:{height:"100%"}},i.a.createElement(O.a,{style:{height:"100%"}},i.a.createElement(L.a,{shrink:!0},this.context.apis.getLabel("Số lượng đặt")),i.a.createElement(b.a,{container:!0,alignItems:"center"},i.a.createElement(b.a,{item:!0,xs:4,sm:4,md:4,lg:4,style:{display:"flex",padding:5,justifyContent:"flex-end"}},i.a.createElement(k.a,{title:this.context.apis.getLabel("Giảm 1")},i.a.createElement(l.a,{size:"small",onClick:function(){return e.handleOrderChanged(-1)},disabled:n.sl_order<=1},i.a.createElement(u.a,null)))),i.a.createElement(b.a,{item:!0,xs:4,sm:4,md:4,lg:4,style:{padding:5}},i.a.createElement(v.a,{margin:"dense",variant:"outlined",fullWidth:!0,type:"text",label:"",value:n.sl_order,InputLabelProps:{shrink:!0},inputProps:{min:1,style:{textAlign:"center"},inputComponent:S.a},onChange:function(t){return e.handleOrderChanged(Number(t.target.value),!1)}}),n.sp_yeu_cau_che_bien&&i.a.createElement(p.a,{variant:"caption",component:"div",style:{textAlign:"center"}},"".concat(this.context.apis.getLabel("Đã gửi bếp"),": ").concat(n.sl_gui_bep)),n.sp_yeu_cau_pha_che&&i.a.createElement(p.a,{variant:"caption",component:"div",style:{textAlign:"center"}},"".concat(this.context.apis.getLabel("Đã gửi bartender"),": ").concat(n.sl_gui_bartender))),i.a.createElement(b.a,{item:!0,xs:2,sm:2,md:2,lg:2,style:{display:"flex",padding:5}},i.a.createElement(k.a,{title:this.context.apis.getLabel("Tăng 1")},i.a.createElement(l.a,{size:"small",onClick:function(){return e.handleOrderChanged(1)},style:{marginRight:10}},i.a.createElement(c.a,null)))))))),i.a.createElement(b.a,{item:!0,md:o?6:12,lg:o?6:12},i.a.createElement(E.a,{style:{height:"100%"}},i.a.createElement(O.a,{style:{height:"100%"}},i.a.createElement(L.a,{shrink:!0},this.context.apis.getLabel(o?"Số lượng hoàn thành":"Số lượng")),i.a.createElement(b.a,{container:!0,alignItems:"center"},i.a.createElement(b.a,{item:!0,xs:4,sm:4,md:4,lg:4,style:{display:"flex",padding:5,justifyContent:"flex-end"}},i.a.createElement(k.a,{title:this.context.apis.getLabel("Giảm 1")},i.a.createElement(l.a,{size:"small",onClick:function(){return e.handleValueChanged(-1)},disabled:n.sl_xuat<=0},i.a.createElement(u.a,null)))),i.a.createElement(b.a,{item:!0,xs:4,sm:4,md:4,lg:4,style:{display:"flex",padding:5}},i.a.createElement(v.a,{margin:"dense",variant:"outlined",fullWidth:!0,type:"text",label:"",value:n.sl_xuat,InputLabelProps:{shrink:!0},inputProps:{min:1,style:{textAlign:"center"},inputComponent:S.a},onChange:function(t){return e.handleValueChanged(Number(t.target.value),!1)}})),i.a.createElement(b.a,{item:!0,xs:2,sm:2,md:2,lg:2,style:{display:"flex",padding:5}},i.a.createElement(k.a,{title:this.context.apis.getLabel("Tăng 1")},i.a.createElement(l.a,{size:"small",onClick:function(){return e.handleValueChanged(1)},style:{marginRight:10}},i.a.createElement(c.a,null)))))))))),i.a.createElement(E.a,{style:{margin:10,padding:10}},i.a.createElement(b.a,{container:!0},i.a.createElement(b.a,{item:!0},i.a.createElement(v.a,{margin:"normal",variant:"standard",type:"text",id:"ty_le_ck_hd",label:this.context.apis.getLabel("Tỷ lệ chiết khấu"),value:n.ty_le_ck,disabled:a,InputLabelProps:{shrink:!0},InputProps:{inputComponent:S.a,min:0},onChange:function(t){return e.handleTyLeCkChanged(Number(t.target.value))}})),i.a.createElement(b.a,{item:!0,style:{flexGrow:1,paddingLeft:10,paddingRight:10}},i.a.createElement(v.a,{fullWidth:!0,margin:"normal",variant:"standard",type:"text",id:"tien_ck_hd",label:this.context.apis.getLabel("Tiền chiết khấu"),value:n.tien_ck_nt,disabled:a,InputLabelProps:{shrink:!0},InputProps:{inputComponent:S.a,min:0},onChange:function(t){return e.handleTienCkChanged(Number(t.target.value))}})),a&&i.a.createElement(b.a,{item:!0,style:{display:"flex",alignItems:"flex-end"}},i.a.createElement(r.a,{variant:"outlined",onClick:this.editDiscount.bind(this)},this.context.apis.getLabel("Sửa"))))),i.a.createElement(E.a,{style:{margin:10,padding:10}},i.a.createElement("div",{style:{display:"flex",alignItems:"flex-end"}},i.a.createElement(v.a,{style:{flexGrow:1},margin:"normal",variant:"standard",type:"text",id:"ghi_chu",multiline:!0,label:this.context.apis.getLabel("Ghi chú"),value:n.ghi_chu,InputLabelProps:{shrink:!0},onChange:function(t){return e.handleGhiChuChanged(t.target.value)}}),i.a.createElement(r.a,{variant:"outlined",style:{marginLeft:10},onClick:function(){return e.pickNote()}},i.a.createElement(C.a,null)))),i.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",padding:10}},i.a.createElement("div",null,i.a.createElement(r.a,{variant:"contained",color:"secondary",onClick:this.save.bind(this)},this.context.apis.getLabel("Lưu")),i.a.createElement(r.a,{variant:"contained",onClick:function(){return e.setState({open:!1})},style:{marginLeft:10}},this.context.apis.getLabel("Đóng"))),i.a.createElement(r.a,{variant:"contained",onClick:this.delete.bind(this),style:{marginLeft:10,backgroundColor:"red",color:"white"}},this.context.apis.getLabel("Xoá"))),i.a.createElement(P.default,{ref:function(t){return e.refObjectPicker=t},formSize:"sm",fullWidth:!0,readOnly:!1,hideItemActions:!0,hideTableHeader:!0,hideHeader:!0})))}}])&&D(t.prototype,n),a&&D(t,a),s}(a.PureComponent);W.contextType=w.a,W.propTypes={open:y.a.bool},t.default=W}}]);