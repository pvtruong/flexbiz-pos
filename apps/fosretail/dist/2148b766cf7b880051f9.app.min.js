(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{1290:function(t,e,i){"use strict";var a=i(22),n=i(23);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(i(0)),l=(0,a(i(24)).default)(o.createElement("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"}),"Fullscreen");e.default=l},1291:function(t,e,i){"use strict";var a=i(22),n=i(23);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(i(0)),l=(0,a(i(24)).default)(o.createElement("path",{d:"M6 19h12v2H6z"}),"Minimize");e.default=l},1292:function(t,e,i){"use strict";var a=i(22),n=i(23);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(i(0)),l=(0,a(i(24)).default)(o.createElement("path",{d:"M3 3h18v2H3z"}),"Maximize");e.default=l},1358:function(t,e,i){"use strict";i.r(e);var a=i(0),n=i.n(a),o=i(43),l=i(1291),s=i.n(l),h=i(1292),c=i.n(h),r=i(1290),m=i.n(r),d=i(338),u=i(228),f=i.n(u),p=i(233),C=i(7),z=i(1),v=i.n(z);class k extends n.a.PureComponent{constructor(t){super(t),this.state={load:0,chatGroups:[],ChatRoom:null},this.open=this.open.bind(this),this.minimizeChat=this.minimizeChat.bind(this),this.closeChat=this.closeChat.bind(this)}async componentDidMount(){const{default:t}=await Promise.all([i.e(1),i.e(31)]).then(i.bind(null,1103));this.setState({ChatRoom:t})}async open(t,e={}){if(!t)return;let{chatGroups:i}=this.state,a=i.find(e=>e.id_link===t.id_link);if(a)(t=a).minimizeChat=!t.minimizeChat;else{if(!(t.title&&t.code_link&&t.attends&&t.phu_trach)){let e=await this.context.apis.asyncGetData(this.context.userInfo.token,"message2setting",{id_link:t.id_link});e&&(t=e)}t.minimizeChat=e.minimize,i.push(t),this.setState({load:this.state.load+1})}t.minimizeChat||this.state.chatGroups.forEach(e=>{e.id_link!==t.id_link&&(e.minimizeChat=!0)}),this.setState({load:this.state.load+1})}minimizeChat(t){t.minimizeChat=!t.minimizeChat,t.minimizeChat||this.state.chatGroups.forEach(e=>{e.id_link!==t.id_link&&(e.minimizeChat=!0)}),this.setState({load:this.state.load+1})}closeChat(t){let e=this.state.chatGroups.filter(e=>e.id_link!==t.id_link);this.setState({chatGroups:e,load:this.state.load+1})}fullChat(t){this.closeChat(t),this.props.history?this.props.history.push("/chat?id_link="+t.id_link):window.location.href="#/chat?id_link="+t.id_link}render(){let{chatGroups:t}=this.state;return n.a.createElement("div",{style:{width:300,bottom:15,right:15,margin:0,top:"auto",left:"auto",zIndex:9e8,position:"fixed",maxHeight:'calc("100vh - 150px")',overflow:"auto",display:"flex",flexDirection:"column"}},t.map(t=>n.a.createElement("div",{key:t.id_link,style:{height:t.minimizeChat?50:410,overflow:"auto",marginBottom:1}},n.a.createElement(o.a,{elevation:2,backgroundColor:this.context.config.primaryColor,style:{height:"100%",margin:0},contentStyle:{padding:1},title:""+(t.title||this.context.apis.getLabel("Thảo luận")),actions:n.a.createElement(p.a,{idLink:t.id_link},n.a.createElement("div",{style:{display:"flex",alignItems:"center"}},n.a.createElement(d.a,{size:"small",onClick:()=>this.fullChat(t)},n.a.createElement(m.a,{style:{fontSize:24,color:this.context.config.mainTextColor}})),n.a.createElement(d.a,{size:"small",style:{marginLeft:5},onClick:()=>this.minimizeChat(t)},t.minimizeChat?n.a.createElement(c.a,{style:{fontSize:24,color:this.context.config.mainTextColor}}):n.a.createElement(s.a,{style:{fontSize:24,color:this.context.config.mainTextColor}})),n.a.createElement(d.a,{size:"small",style:{marginLeft:5},onClick:()=>this.closeChat(t)},n.a.createElement(f.a,{style:{fontSize:24,color:this.context.config.mainTextColor}}))))},this.state.ChatRoom&&n.a.createElement(this.state.ChatRoom,{idLink:t.id_link,codeLink:t.code_link,attends:t.attends,phuTrach:t.phu_trach,minimize:t.minimizeChat})))))}}k.contextType=C.a,k.propTypes={history:v.a.any},e.default=k}}]);